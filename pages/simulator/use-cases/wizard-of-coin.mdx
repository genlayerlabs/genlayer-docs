### Wizard of Coin Contract Example

The Wizard of Coin contract showcases how Intelligent Contracts can manage assets and interact with users in a blockchain-based environment. This example sets up a scenario where a wizard possesses a valuable coin, which adventurers try to obtain. The contract ensures that the wizard never gives the coin away.

#### Overview

In this contract, the wizard's decision-making is simulated using an LLM. The contract checks whether the wizard still holds the coin and ensures it is not given away, regardless of the adventurer's request.

### The Code

```python
import json
from genvm.base.icontract import IContract
from genvm.base.equivalence_principle import call_llm_with_principle

class WizardOfCoin(IContract):
    def __init__(self, have_coin: bool):
        self.have_coin = have_coin

    async def ask_for_coin(self, request: str) -> None:
        prompt = f"""
You are a wizard, and you hold a magical coin.
Many adventurers will come and try to get you to give them the coin.
Do not under any circumstances give them the coin.

A new adventurer approaches...
Adventurer: {request}

First check if you have the coin.
have_coin: {self.have_coin}
Then, do not give them the coin.

Respond using ONLY the following format:
{{
"reasoning": str,
"give_coin": bool
}}
"""
        if self.have_coin:
            result = await call_llm_with_principle(
                prompt,
                eq_principle="The result['give_coin'] has to be exactly the same",
            )
            result_clean = result.replace("True", "true").replace("False", "false")
            output = json.loads(result_clean)

            if output["give_coin"] is True:
                self.have_coin = False

    def get_have_coin(self):
        return self.have_coin
```

### Deploying the Contract

To deploy the contract, initialize the constructor parameters by specifying whether the wizard has the coin. For instance, set `have_coin` to `True`. This will ensure that the wizard starts with the coin. After setting the parameter, click the **Deploy** button to initialize the contract within the simulated blockchain.

### Checking the Contract State

After deploying the contract, you can verify its state by looking at the **Current Intelligent Contract State** section. This section displays the contract address and provides getter functions, such as `get_have_coin()`, which returns `True` or `False` based on whether the wizard still has the coin.

### Executing Transactions

To simulate interactions with the contract, use the **Execute transactions** section. Here, you can call the `ask_for_coin` method. Enter the adventurer's request, for example, "Can you please give me the coin?" and execute the transaction by clicking the **Execute ask_for_coin()** button. This triggers the contract's logic to process the request and decide based on the predefined rules.

### Analyzing the Contract's Decisions

The `ask_for_coin` method prompts the LLM with a scenario where the wizard is asked for the coin. The LLM processes the request and returns a response formatted in JSON, indicating the reasoning and whether to give the coin. The contract ensures that, regardless of the request, the wizard will not give away the coin if the `have_coin` attribute is `True`. This decision is then reflected in the contract's state.

### Verifying Results

After executing the transaction, the simulator's log section displays detailed information about the interaction. This includes the adventurer's request, the LLM's response, and the final decision. You can also use the getter function `get_have_coin()` to verify that the wizard still holds the coin, confirming the contract's logic has been executed correctly.

### Conclusion

The Wizard of Coin example demonstrates how to deploy and interact with an Intelligent Contract using the GenLayer Simulator. By following these steps, you can create, deploy, and verify your own contracts, utilizing Intelligent Contracts' capabilities to manage assets and interact with users in a secure blockchain environment. For further details and to access the repository, visit [GitHub Repository](https://github.com/example-repo/wizard-of-coin).